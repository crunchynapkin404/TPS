{% extends 'base.html' %}
{% load static %}

{% block extra_css %}
<style>
  .metric-card {
    @apply card hover-lift bg-gradient-to-br from-white via-gray-50 to-gray-100 dark:from-gray-800 dark:via-gray-800 dark:to-gray-900;
  }
  
  .metric-icon {
    @apply w-12 h-12 rounded-2xl flex items-center justify-center shadow-lg;
  }
  
  .progress-ring {
    transform: rotate(-90deg);
    transform-origin: 50% 50%;
  }
  
  .activity-item {
    @apply flex items-start gap-4 p-4 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-200;
  }
  
  .timeline-dot {
    @apply w-3 h-3 rounded-full border-2 border-white dark:border-gray-800 shadow-sm;
  }
  
  .stats-grid {
    @apply grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6;
  }
  
  .personal-card {
    @apply card bg-gradient-to-br from-blue-50 via-white to-indigo-50 dark:from-blue-900/20 dark:via-gray-800 dark:to-indigo-900/20 border-blue-200 dark:border-blue-800;
  }
</style>
{% endblock %}

{% block content %}
<div class="min-h-screen bg-gradient-to-br from-gray-50 via-white to-blue-50 dark:from-gray-900 dark:via-gray-800 dark:to-blue-900 p-6">
  <!-- Personal Header -->
  <div class="mb-8 animate-fade-in">
    <div class="flex items-center gap-6 mb-6">
      <div class="w-20 h-20 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-xl">
        <span class="text-2xl font-bold text-white">{{ user.first_name.0|default:'U' }}{{ user.last_name.0|default:'' }}</span>
      </div>
      <div>
        <h1 class="text-3xl font-bold text-gray-900 dark:text-white">
          Welcome back, {{ user.first_name|default:user.username }}! ðŸ‘‹
        </h1>
        <p class="text-gray-600 dark:text-gray-400 text-lg">{{ user.get_full_name|default:user.username }} â€¢ {{ user.employee_id }}</p>
        <div class="flex items-center gap-4 mt-2">
          <span class="badge badge-primary">Team Member</span>
          <span class="badge badge-success flex items-center gap-1">
            <span class="status-dot status-online"></span>
            Active
          </span>
        </div>
      </div>
    </div>
  </div>

  <!-- Personal Stats Overview -->
  <div class="stats-grid mb-8 animate-slide-up">
    <!-- YTD Hours -->
    <div class="metric-card">
      <div class="card-body">
        <div class="flex items-center justify-between">
          <div>
            <div class="metric-icon bg-gradient-to-br from-blue-500 to-blue-600">
              <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
            </div>
            <div class="mt-4">
              <p class="text-sm font-medium text-gray-600 dark:text-gray-400">YTD Hours</p>
              <p class="text-2xl font-bold text-gray-900 dark:text-white">{{ user.ytd_hours_logged|floatformat:1 }}</p>
              <p class="text-sm text-green-600 dark:text-green-400">+5.2% from last month</p>
            </div>
          </div>
          <!-- Progress Ring -->
          <div class="relative w-16 h-16">
            <svg class="w-16 h-16 progress-ring" viewBox="0 0 36 36">
              <path class="text-gray-200 dark:text-gray-700" stroke="currentColor" stroke-width="2" fill="none" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"></path>
              <path class="text-blue-500" stroke="currentColor" stroke-width="3" stroke-linecap="round" fill="none" stroke-dasharray="65, 100" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"></path>
            </svg>
            <div class="absolute inset-0 flex items-center justify-center">
              <span class="text-xs font-semibold text-gray-700 dark:text-gray-300">65%</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Waakdienst Weeks -->
    <div class="metric-card">
      <div class="card-body">
        <div class="flex items-center justify-between">
          <div>
            <div class="metric-icon bg-gradient-to-br from-emerald-500 to-emerald-600">
              <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
            </div>
            <div class="mt-4">
              <p class="text-sm font-medium text-gray-600 dark:text-gray-400">Waakdienst Weeks</p>
              <p class="text-2xl font-bold text-gray-900 dark:text-white">{{ user.ytd_waakdienst_weeks }}/8</p>
              <p class="text-sm text-gray-500 dark:text-gray-400">
                {% if user.ytd_waakdienst_weeks == 0 %}8 remaining
                {% elif user.ytd_waakdienst_weeks == 1 %}7 remaining  
                {% elif user.ytd_waakdienst_weeks == 2 %}6 remaining
                {% elif user.ytd_waakdienst_weeks == 3 %}5 remaining
                {% elif user.ytd_waakdienst_weeks == 4 %}4 remaining
                {% elif user.ytd_waakdienst_weeks == 5 %}3 remaining
                {% elif user.ytd_waakdienst_weeks == 6 %}2 remaining
                {% elif user.ytd_waakdienst_weeks == 7 %}1 remaining
                {% else %}0 remaining{% endif %}
              </p>
            </div>
          </div>
          <div class="text-right">
            <div class="w-16 h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden">
              <div class="h-full bg-gradient-to-r from-emerald-500 to-emerald-600 rounded-full" style="width: {% widthratio user.ytd_waakdienst_weeks 8 100 %}%"></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Incident Weeks -->
    <div class="metric-card">
      <div class="card-body">
        <div class="flex items-center justify-between">
          <div>
            <div class="metric-icon bg-gradient-to-br from-amber-500 to-amber-600">
              <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path>
              </svg>
            </div>
            <div class="mt-4">
              <p class="text-sm font-medium text-gray-600 dark:text-gray-400">Incident Weeks</p>
              <p class="text-2xl font-bold text-gray-900 dark:text-white">{{ user.ytd_incident_weeks }}/12</p>
              <p class="text-sm text-gray-500 dark:text-gray-400">
                {% if user.ytd_incident_weeks == 0 %}12 remaining
                {% elif user.ytd_incident_weeks == 1 %}11 remaining  
                {% elif user.ytd_incident_weeks == 2 %}10 remaining
                {% elif user.ytd_incident_weeks == 3 %}9 remaining
                {% elif user.ytd_incident_weeks == 4 %}8 remaining
                {% elif user.ytd_incident_weeks == 5 %}7 remaining
                {% elif user.ytd_incident_weeks == 6 %}6 remaining
                {% elif user.ytd_incident_weeks == 7 %}5 remaining
                {% elif user.ytd_incident_weeks == 8 %}4 remaining
                {% elif user.ytd_incident_weeks == 9 %}3 remaining
                {% elif user.ytd_incident_weeks == 10 %}2 remaining
                {% elif user.ytd_incident_weeks == 11 %}1 remaining
                {% else %}0 remaining{% endif %}
              </p>
            </div>
          </div>
          <div class="text-right">
            <div class="w-16 h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden">
              <div class="h-full bg-gradient-to-r from-amber-500 to-amber-600 rounded-full" style="width: {% widthratio user.ytd_incident_weeks 12 100 %}%"></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Quick Actions -->
    <div class="metric-card">
      <div class="card-body">
        <div class="text-center">
          <div class="metric-icon bg-gradient-to-br from-purple-500 to-purple-600 mx-auto mb-4">
            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
            </svg>
          </div>
          <a href="{% url 'leave_management:create_request' %}" class="btn-primary btn-lg w-full">
            Request Leave
          </a>
        </div>
      </div>
    </div>
  </div>

  <!-- Main Content Grid -->
  <div class="desktop-grid gap-8">
    <!-- Left Column - Schedule & Activities -->
    <div class="desktop-main space-y-8">
      <!-- Today's Summary -->
      <div class="personal-card animate-slide-up">
        <div class="card-header">
          <h2 class="text-xl font-bold text-gray-900 dark:text-white">Today's Overview</h2>
          <time class="text-sm text-gray-500 dark:text-gray-400">{{ today|date:"l, F j, Y" }}</time>
        </div>
        <div class="card-body">
          <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <!-- Today's Incident Engineer -->
            <div class="text-center p-4 rounded-xl bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800">
              <div class="w-10 h-10 bg-red-100 dark:bg-red-900 rounded-lg flex items-center justify-center mx-auto mb-3">
                <svg class="w-5 h-5 text-red-600 dark:text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path>
                </svg>
              </div>
              <p class="text-sm font-medium text-gray-600 dark:text-gray-400">Incident Engineer</p>
              <p class="text-lg font-bold text-gray-900 dark:text-white">
                {% if incident_engineer_today %}
                  {{ incident_engineer_today.user.first_name }} {{ incident_engineer_today.user.last_name }}
                {% else %}
                  No one assigned
                {% endif %}
              </p>
            </div>

            <!-- Today's Waakdienst Engineer -->
            <div class="text-center p-4 rounded-xl bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-200 dark:border-emerald-800">
              <div class="w-10 h-10 bg-emerald-100 dark:bg-emerald-900 rounded-lg flex items-center justify-center mx-auto mb-3">
                <svg class="w-5 h-5 text-emerald-600 dark:text-emerald-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
              </div>
              <p class="text-sm font-medium text-gray-600 dark:text-gray-400">Waakdienst Engineer</p>
              <p class="text-lg font-bold text-gray-900 dark:text-white">
                {% if waakdienst_engineer_today %}
                  {{ waakdienst_engineer_today.user.first_name }} {{ waakdienst_engineer_today.user.last_name }}
                {% else %}
                  No one assigned
                {% endif %}
              </p>
            </div>

            <!-- Team Working Today -->
            <div class="text-center p-4 rounded-xl bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800">
              <div class="w-10 h-10 bg-blue-100 dark:bg-blue-900 rounded-lg flex items-center justify-center mx-auto mb-3">
                <svg class="w-5 h-5 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                </svg>
              </div>
              <p class="text-sm font-medium text-gray-600 dark:text-gray-400">Team Working</p>
              <p class="text-lg font-bold text-gray-900 dark:text-white">{{ total_working_today }}</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Personal Recommendations -->
      {% if personal_advice %}
      <div class="card animate-slide-up">
        <div class="card-header">
          <h2 class="text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2">
            <svg class="w-5 h-5 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
            </svg>
            Personal Recommendations
          </h2>
        </div>
        <div class="card-body space-y-4">
          {% for advice in personal_advice %}
          <div class="p-4 rounded-xl border-l-4 {% if advice.type == 'warning' %}bg-amber-50 dark:bg-amber-900/20 border-l-amber-500{% elif advice.type == 'success' %}bg-emerald-50 dark:bg-emerald-900/20 border-l-emerald-500{% else %}bg-blue-50 dark:bg-blue-900/20 border-l-blue-500{% endif %}">
            <div class="flex items-start gap-3">
              <div class="flex-shrink-0 mt-0.5">
                {% if advice.type == 'warning' %}
                <svg class="w-5 h-5 text-amber-600 dark:text-amber-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path>
                </svg>
                {% elif advice.type == 'success' %}
                <svg class="w-5 h-5 text-emerald-600 dark:text-emerald-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                {% else %}
                <svg class="w-5 h-5 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                {% endif %}
              </div>
              <div class="flex-1">
                <h3 class="text-sm font-semibold text-gray-900 dark:text-white">{{ advice.title }}</h3>
                <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">{{ advice.message }}</p>
                {% if advice.action %}
                <p class="text-xs text-gray-500 dark:text-gray-500 mt-2 font-medium">{{ advice.action }}</p>
                {% endif %}
              </div>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
      {% endif %}

      <!-- Upcoming Shifts -->
      <div class="card animate-slide-up">
        <div class="card-header">
          <h2 class="text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2">
            <svg class="w-5 h-5 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
            </svg>
            My Upcoming Shifts
          </h2>
        </div>
        <div class="card-body">
          {% if upcoming_shifts %}
          <div class="space-y-4">
            {% for assignment in upcoming_shifts %}
            <div class="activity-item border border-gray-200 dark:border-gray-700 rounded-xl">
              <div class="timeline-dot bg-blue-500"></div>
              <div class="flex-1 min-w-0">
                <div class="flex items-center justify-between">
                  <h3 class="text-sm font-semibold text-gray-900 dark:text-white">
                    {{ assignment.shift.template.name }}
                  </h3>
                  <span class="badge badge-success">{{ assignment.status|title }}</span>
                </div>
                <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">
                  {{ assignment.shift.start_datetime|date:"l, F j" }} â€¢ 
                  {{ assignment.shift.start_datetime|time:"H:i" }} - {{ assignment.shift.end_datetime|time:"H:i" }}
                </p>
              </div>
            </div>
            {% endfor %}
          </div>
          {% else %}
          <div class="text-center py-12">
            <svg class="w-16 h-16 mx-auto text-gray-400 dark:text-gray-500 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
            </svg>
            <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">No upcoming shifts</h3>
            <p class="text-gray-500 dark:text-gray-400">Your schedule is clear for now</p>
          </div>
          {% endif %}
        </div>
      </div>
    </div>

    <!-- Right Sidebar -->
    <div class="desktop-sidebar space-y-8">
      <!-- Leave Requests -->
      <div class="card animate-slide-up">
        <div class="card-header">
          <h2 class="text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2">
            <svg class="w-5 h-5 text-emerald-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
            My Leave Requests
          </h2>
        </div>
        <div class="card-body">
          {% if my_leave_requests %}
          <div class="space-y-3">
            {% for request in my_leave_requests %}
            <div class="flex items-center justify-between p-3 rounded-lg bg-gray-50 dark:bg-gray-700">
              <div class="flex-1 min-w-0">
                <p class="text-sm font-semibold text-gray-900 dark:text-white truncate">{{ request.leave_type.name }}</p>
                <p class="text-xs text-gray-500 dark:text-gray-400">{{ request.start_date|date:"d/m/Y" }} - {{ request.end_date|date:"d/m/Y" }}</p>
              </div>
              <div class="ml-3">
                {% if request.status == 'approved' %}
                <span class="badge badge-success">{{ request.get_status_display }}</span>
                {% elif request.status == 'declined' %}
                <span class="badge badge-error">{{ request.get_status_display }}</span>
                {% else %}
                <span class="badge badge-warning">{{ request.get_status_display }}</span>
                {% endif %}
              </div>
            </div>
            {% endfor %}
          </div>
          <div class="mt-6 pt-4 border-t border-gray-200 dark:border-gray-700">
            <a href="{% url 'leave_management:overview' %}" class="text-sm text-blue-600 hover:text-blue-500 font-medium">View all requests â†’</a>
          </div>
          {% else %}
          <div class="text-center py-8">
            <svg class="w-12 h-12 mx-auto text-gray-400 dark:text-gray-500 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
            <p class="text-sm text-gray-500 dark:text-gray-400 mb-4">No leave requests yet</p>  
            <a href="{% url 'leave_management:create_request' %}" class="btn-primary btn-sm">Create your first request</a>
          </div>
          {% endif %}
        </div>
      </div>

      <!-- Quick Actions -->
      <div class="card animate-slide-up">
        <div class="card-header">
          <h2 class="text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2">
            <svg class="w-5 h-5 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
            </svg>
            Quick Actions
          </h2>
        </div>
        <div class="card-body space-y-3">
          <a href="{% url 'frontend:schedule' %}" class="btn-ghost w-full justify-start">
            <svg class="w-5 h-5 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
            </svg>
            View Full Schedule
          </a>
          <a href="{% url 'leave_management:calendar' %}" class="btn-ghost w-full justify-start">
            <svg class="w-5 h-5 text-emerald-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path>
            </svg>
            Leave Calendar
          </a>
          <a href="{% url 'frontend:profile' %}" class="btn-ghost w-full justify-start">
            <svg class="w-5 h-5 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
            </svg>
            Update Profile
          </a>
        </div>
      </div>

      <!-- Mini Calendar -->
      <div class="card animate-slide-up">
        <div class="card-header">
          <h2 class="text-lg font-semibold text-gray-900 dark:text-white">This Month</h2>
        </div>
        <div class="card-body">
          <div class="grid grid-cols-7 gap-1 text-center text-xs font-medium text-gray-500 dark:text-gray-400 mb-2">
            <div>S</div><div>M</div><div>T</div><div>W</div><div>T</div><div>F</div><div>S</div>
          </div>
          <div class="grid grid-cols-7 gap-1 text-center">
            <!-- Calendar days would be generated here -->
            {% for day in calendar_days %}
            <div class="w-8 h-8 flex items-center justify-center text-sm rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer
              {% if day.is_today %}bg-blue-500 text-white{% elif day.has_shift %}bg-emerald-100 text-emerald-700 dark:bg-emerald-900 dark:text-emerald-300{% endif %}">
              {{ day.day }}
            </div>
            {% empty %}
            <!-- Placeholder calendar -->
            {% for i in "1234567890123456789012345678901234567890" %}
            <div class="w-8 h-8 flex items-center justify-center text-sm rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer">
              {% if forloop.counter0 == 14 %}
              <div class="bg-blue-500 text-white rounded-lg w-full h-full flex items-center justify-center">15</div>
              {% elif forloop.counter0 == 20 or forloop.counter0 == 27 %}
              <div class="bg-emerald-100 text-emerald-700 dark:bg-emerald-900 dark:text-emerald-300 rounded-lg w-full h-full flex items-center justify-center">{{ forloop.counter0|add:"-6" }}</div>
              {% else %}
              {{ forloop.counter0|add:"-6" }}
              {% endif %}
            </div>
            {% endfor %}
            {% endfor %}
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}